<div class="information">
  <!--Product Info-->
  <form id="product-actions" action="/cart/add" method="post" enctype="multipart/form-data"
    {%- if product.has_only_default_variant -%}
    class="product-simple"
    {%- elsif product.variants.size > 1 -%}
    class="product-variants"
    {%- endif -%}>

    <div id="bag-total">
      <div class="title">
        <!-- Product Title -->
        <div>{{ product.title }}</div>
        
        <!-- Product Price -->
        <div id="product-price">
          {% if product.compare_at_price > product.price %}
            <span class="sale-price">{{ product.price | money }}</span>
            <span class="compare-at-price">{{ product.compare_at_price | money }}</span>
          {% else %}
            <span class="regular-price">{{ product.price | money }}</span>
          {% endif %}
        </div>

        <!-- Sale/Availability Message -->
        {% if product.available %}
        {% else %}
          <div class="sale">SOLD OUT</div>
        {% endif %}
      </div>

      <div class="variations">
        <!-- Dynamic Variant Selectors -->
        {% for option_index in (0..product.options.size) %}
          <div class="option-selector">
            <label for="option-{{ option_index }}">{{ product.options[option_index] }}</label>
            <select id="option-{{ option_index }}" name="option{{ option_index }}">
              {% assign option_values = '' %}
              {% for variant in product.variants %}
                {% assign option_value = variant.options[option_index] %}
                <!-- Ensure no duplicates in dropdown -->
                {% unless option_values contains option_value %}
                  <option value="{{ option_value }}">{{ option_value }}</option>
                  {% assign option_values = option_values | append: option_value | append: ',' %}
                {% endunless %}
              {% endfor %}
            </select>
          </div>
        {% endfor %}
        
        <!-- Actions -->
        {% if product.available %}
          <button id="add-to-cart" type="submit" name="add">ADD TO BAG</button>
        {% else %}
          <div class="unavailable">Currently Unavailable</div>
        {% endif %}
      </div>
      
      <div class="in">
        <!-- Show/Hide Information Section -->
        <div class="show_info">
          <a class="button_mas">
            <span class="fir">SHOW INFORMATION</span>
            <span class="sec">HIDE INFORMATION</span>
          </a>
        </div>
        
        <!-- Product Information -->
        <div class="project_info">
          <span>{{ product.content }}</span>
        </div> 
      </div>
    </div>
</form>


</div>
<div class="full-scroll">
  <div class="big section-title">{{ product.title }}</div>

  <div class="product_information">
    <div class="categories-e">
      {% for collection in product.collections %}
        {% unless collection.handle == 'all' or collection.handle == 'special' %}
          <a class="categorie-e" href="{{ collection.url }}">{{ collection.title }}</a>{% unless forloop.last %}{% endunless %}
        {% endunless %}

      {% endfor %}
      <div class="at-a">{{ product.metafields.custom.artists | metafield_tag }}</div>
    </div>
    <div class="intro">
      {{ product.metafields.custom.extra_info }}
    </div>

  </div>
  <div class="product_gallery">
    {% for media in product.media %}
    {% case media.media_type %}
    {% when 'video' %}
    {{ media | video_tag:loop: true, autoplay: true, muted:true}}
    {% endcase %}
    {% case media.media_type %}
    {% when 'image' %}
    <img class="lazy" src="{{ media | product_img_url: 'thumb' }}" data-src="{{ media | product_img_url: 'master' }}" alt="{{ media.alt }}"/>
    {% endcase %}
    {% endfor %}
  </div>
</div>
{% include "related" %}
{% assign variants = 0 %}
{% for option in product.options %}
{% if product.options.first != 'Title' %}
{% assign variants = variants | plus: 1 %}
{% endif %}
{% endfor %}

<script>
  //Produt functions
  var selectCallback = function(variant, selector){
    if(variant){
      if(variant.available){   
        jQuery('#add-to-cart').prop('disabled', false).text('ADD TO CART');      
      }else{
        jQuery('#add-to-cart').prop('disabled', true).text('SOLD OUT');      
      }
      if( variant.compare_at_price > variant.price ) {
        {% if variant.price < variant.compare_at_price %} {{ variant.compare_at_price | money }}{% endif %}
        jQuery('#product-price').html(Shopify.formatMoney(variant.price, "<span>{{ shop.money_format }}</span>") + " <s>" + Shopify.formatMoney(variant.compare_at_price, "{{ shop.money_format }}") + "</s>");
      }else{
        jQuery('#product-price').html(Shopify.formatMoney(variant.price, "{{ shop.money_format }}"));
      }  
    }else{
      jQuery('#product-price').empty();
      jQuery('#add-to-cart').prop('disabled', true).text('ADD TO CART');
      {% if product.price_varies %}
        jQuery('#product-price').html('{{ product.price_min | money }} â€“ {{ product.price_max | money }}' );
      {% else %}
        jQuery('#product-price').html('{{ product.price | money }}');
      {% endif %}                         
    }
  };
  //Replace default variant selector                                 
  jQuery(function($) {
    new Shopify.OptionSelectors('product-select', {
      product: {{ product | json }},
      onVariantSelected: selectCallback
    });  
    {% assign count = -1 %}                                    
    {% for option in product.options %}
    {% if product.options.first != 'Title' %}
      {% assign count = count | plus: 1 %}
      $("#product-select-option-{{ count }}").prepend("<option value='' disabled selected>{{ product.options[count] | upcase }}</option>");                        
    {% endif %}
    {% endfor %}
  });
</script>